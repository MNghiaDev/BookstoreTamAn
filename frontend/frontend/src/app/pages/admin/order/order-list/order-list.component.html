<h2>Quáº£n lÃ½ Ä‘Æ¡n hÃ ng</h2>

<div class="order-controls">
  <button (click)="deleteOrder()" [disabled]="selectedOrderId == null" class="btn-delete">
    ğŸ—‘ XÃ³a Ä‘Æ¡n
  </button>

  <select [formControl]="statusControl">
    <option value="">-- Chá»n tráº¡ng thÃ¡i má»›i --</option>
    <option value="pending">Chá» xá»­ lÃ½</option>
    <option value="processing">Äang xá»­ lÃ½</option>
    <option value="shipped">Äang giao</option>
    <option value="delivered">ÄÃ£ giao</option>
    <option value="canceled">ÄÃ£ há»§y</option>
  </select>
  <button (click)="updateStatus()" [disabled]="selectedOrderId == null">Cáº­p nháº­t tráº¡ng thÃ¡i</button>
</div>
<div class="filter-controls">
  <label for="filterStatus">Lá»c theo tráº¡ng thÃ¡i:</label>
  <select id="filterStatus" [(ngModel)]="filterStatus" (change)="fetchOrders()">
    <option value="">Táº¥t cáº£</option>
    <option value="pending">Chá» xá»­ lÃ½</option>
    <option value="processing">Äang xá»­ lÃ½</option>
    <option value="shipped">Äang giao</option>
    <option value="delivered">ÄÃ£ giao</option>
    <option value="canceled">ÄÃ£ há»§y</option>
  </select>
</div>

<table class="order-table">
  <thead>
    <tr>
      <th>MÃ£ Ä‘Æ¡n hÃ ng</th>
      <th>KhÃ¡ch hÃ ng</th>
      <th>Tá»•ng tiá»n</th>
      <th>Tráº¡ng thÃ¡i</th>
      <th>NgÃ y táº¡o</th>
      <th>Thanh toÃ¡n</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let order of orders"
        (click)="selectOrder(order.orderId)"
        [class.selected]="order.orderId === selectedOrderId">
        <td>{{ order.orderCode }}</td>
        <td>{{ order.recipientName }}</td>
        <td>{{ order.totalPrice | currency:'VND' }}</td>
        <td>
         <span [ngClass]="order.status">{{ getStatusLabel(order.status) }}</span>
        </td>
        <td>{{ order.orderDate | date:'short' }}</td>
              <!-- <td>
        <span
          class="badge-toggle"
          [ngClass]="order.active ? 'badge-active' : 'badge-inactive'"
          (click)="toggleActive(order)"
        >
          {{ order.active ? 'Hiá»ƒn thá»‹' : 'áº¨n' }}
        </span>
      </td> -->
      <td>
        @if (order.paid) {
          <span style="color: green;">ÄÃ£ thanh toÃ¡n</span>
        }@else {
          <span style="color: red;">ChÆ°a thanh toÃ¡n</span> 
        }
      </td>

    </tr>
  </tbody>
</table>
<div class="pagination-controls">
  <button (click)="previousPage()" [disabled]="page === 0">â† TrÆ°á»›c</button>
  <span>Trang {{ page + 1 }} / {{ totalPages }}</span>
  <button (click)="nextPage()" [disabled]="page + 1 >= totalPages">Sau â†’</button>
</div>
